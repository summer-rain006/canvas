<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>canvas - ç»˜åˆ¶ - drawImage</title>
  <style>
    /* ç»™ç”»å¸ƒå¢åŠ ä¸€ä¸ªé˜´å½±å’Œåœ†è§’çš„æ ·å¼ */
    canvas {
      box-shadow: 0px 0px 5px #ccc;
      border-radius: 8px;
    }
  </style>
</head>

<body>
  <canvas id="canvas" width="500" height="500">
    å½“å‰æµè§ˆå™¨ä¸æ”¯æŒcanvaså…ƒç´ ï¼Œè¯·å‡çº§æˆ–æ›´æ¢æµè§ˆå™¨ï¼
  </canvas>
  <script>
    /**
     * transform(a, b, c, d, e, f)æ–¹æ³•èƒ½å°†å½“å‰çš„å˜å½¢çŸ©é˜µä¹˜ä¸Šä¸€ä¸ªåŸºäºè‡ªèº«å‚æ•°çš„çŸ©é˜µï¼›
     * setTransform(a, b, c, d, e, f)æ–¹æ³•ä¼šå°†å½“å‰å˜å½¢çŸ©é˜µé‡ç½®ä¸ºå•ä½çŸ©é˜µï¼Œç„¶åç”¨ç›¸åŒçš„å‚æ•°è°ƒç”¨ transform æ–¹æ³•
     * resetTransform()æ–¹æ³•ä¸ºé‡ç½®å½“å‰å˜å½¢ä¸ºå•ä½çŸ©é˜µã€‚æ•ˆæœç­‰åŒäºè°ƒç”¨ setTransform(1, 0, 0, 1, 0, 0)
     *
     * éœ€è¦æ³¨æ„çš„æ˜¯transformæ–¹æ³•å’ŒsetTransformæ–¹æ³•ä¸­å¦‚æœä»»æ„ä¸€ä¸ªå‚æ•°æ˜¯æ— é™å¤§ï¼ˆInfinityï¼‰ï¼Œé‚£ä¹ˆå˜å½¢çŸ©é˜µä¹Ÿå¿…é¡»è¢«æ ‡è®°ä¸ºæ— é™å¤§ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
     * å‚æ•°è¯´æ˜ï¼š
     *  aï¼šæ°´å¹³æ–¹å‘çš„ç¼©æ”¾
     *  bï¼šç«–ç›´æ–¹å‘çš„å€¾æ–œåç§»
     *  cï¼šæ°´å¹³æ–¹å‘çš„å€¾æ–œåç§»
     *  dï¼šç«–ç›´æ–¹å‘çš„ç¼©æ”¾
     *  eï¼šæ°´å¹³æ–¹å‘çš„ç§»åŠ¨
     *  fï¼šç«–ç›´æ–¹å‘çš„ç§»åŠ¨
     */
    // è·å– canvas å…ƒç´ 
    var canvas = document.getElementById('canvas');
    // é€šè¿‡åˆ¤æ–­getContextæ–¹æ³•æ˜¯å¦å­˜åœ¨æ¥åˆ¤æ–­æµè§ˆå™¨çš„æ”¯æŒæ€§
    if (canvas.getContext) {
      // è·å–ç»˜å›¾ä¸Šä¸‹æ–‡
      var ctx = canvas.getContext('2d');
      //
      var sin = Math.sin(Math.PI / 6);
      var cos = Math.cos(Math.PI / 6);
      console.log("ğŸš€ ~ cos, sin", cos, sin, Math.PI, Math.PI / 6)
      ctx.translate(250, 250);
      var c = 0;
      for (var i = 0; i <= 12; i++) {
        c = Math.floor(255 / 12 * i);
        ctx.fillStyle = `rgba(${c}, ${c}, ${c})`;
        ctx.beginPath() // å¼€å¯è·¯å¾„
        ctx.arc(60, 100, 100, 0, Math.PI * 2, false);
        ctx.fill();
        ctx.transform(cos, sin, -sin, cos, 0, 0);
      }
      // ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢
      ctx.fillStyle = "rgba(255, 128, 255, 0.5)";
      ctx.fillRect(0, 50, 100, 100);
      // ä¸Šé¢ç»˜åˆ¶çš„çŸ©å½¢ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ²¡å› ä¸ºå®ƒå¸¦ä¸Šäº†ä¸Šé¢transformçš„å±æ€§
      // æ‰€ä»¥éœ€è¦é‡ç½®å½“å‰å˜å½¢ä¸ºå•ä½çŸ©é˜µ
      ctx.resetTransform()
      ctx.fillStyle = "rgba(255, 128, 255, 0.5)";
      ctx.fillRect(0, 50, 100, 100);
    }
  </script>
</body>

</html>